<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <title>Barchart OnDemand JS Client</title>

    <script src="../dist/barchart-ondemand-client.js"></script>

    <script>
        var onDemand = new Barchart.OnDemandClient();

        onDemand.setAPIKey('change-me');
        // onDemand.setJsonP(false);
        // onDemand.setBaseUrl('http://localhost:8080/ondemand');

        onDemand.getQuote({ symbols: 'AAPL,GOOG' }).then((data) => {
            var quotes = data.results;
            for (x in quotes) {
                console.log("getQuote: " + quotes[x].symbol + " [" + quotes[x].name + "] = " + JSON.stringify(quotes[x]));
            }
        }).catch((e) => { console.error("failed to get dart", e) })

        onDemand.getUSDAGrainPrices({ commodityTypes: 'C,S' }).then((data) => {
            data.results.forEach((grain, index) => {
                console.log("getUSDAGrainPrices = " + index + ": " + grain.commodityType + " [" + grain.location + "]" + JSON.stringify(grain));
            });
        }).catch((err) => {
            console.error(err);
        });

        onDemand.getSpecialOptions({ root: 'BCD' }).then((data) => {
            data.results.forEach((option, index) => {
                //console.log("getSpecialOptions = " + index + ": " + option.root + " [" + option.symbol + "]" + JSON.stringify(option));
            });
        }).catch((err) => {
            console.error(err);
        });

        onDemand.getEquityOptions({ underlying_symbols: 'AAPL' }).then((data) => {
            data.results.forEach((option, index) => {
                // console.log("getEquityOptions = " + index + ": " + option.underlying_symbol + " [" + option.symbol + "]" + JSON.stringify(option));
            });
        });

        onDemand.getFuturesOptions({ root: 'ES' }).then((data) => {
            data.results.forEach((option, index) => {
                // console.log("getFuturesOptions = " + index + ": " + option.root + " [" + option.contract + "]" + JSON.stringify(option));
            });
        });

        onDemand.getHistory({ symbol: 'AAPL', type: 'minutes', interval: '5' }).then((data) => {
            data.results.forEach((bar, index) => {
                console.log("getHistory = " + index + ": " + bar.symbol + " [" + bar.timestamp + "]" + JSON.stringify(bar));
            });
        });

        onDemand.getFuturesOptionsExpirations({ roots: 'ES' }).then((data) => {
            data.results.forEach((contract, index) => {
                //console.log("getFuturesOptionsExpirations = " + index + ": " + contract.symbol + " " + JSON.stringify(contract));
            });
        });

        onDemand.getFuturesExpirations({ roots: 'ES,GC' }).then((data) => {
            data.results.forEach((contract, index) => {
                console.log("getFuturesExpirations = " + index + ": " + contract.symbol + " " + JSON.stringify(contract));
            });
        });

        onDemand.getFuturesSpecifications({ symbols: 'ES,GC' }).then((data) => {
            data.results.forEach((spec, index) => {
                console.log("getFuturesSpecifications = " + index + ": " + spec.symbol + " " + JSON.stringify(spec));
            });

        });

        onDemand.getInstrumentDefinition({ symbols: 'AAPL,ESZ14' }).then((data) => {
            data.results.forEach((def, index) => {
                console.log("getInstrumentDefinition = " + index + ": " + def.symbol + " " + JSON.stringify(def));
            });

        });

        onDemand.getEarningsEstimates({ symbols: 'AAPL' }).then((data) => {
            data.results.forEach((estimate, index) => {
                console.log("getEarningsEstimates = " + index + ": " + estimate.symbol + " " + JSON.stringify(estimate));
            });
        });

        onDemand.getCorporateActions({ symbols: 'AAPL', eventType: 'earnings' }).then((data) => {
            data.results.forEach((event, index) => {
                console.log("getCorporateActions = " + index + ": " + event.symbol + "[" + event.eventType + "] " + JSON.stringify(event));
            });

        });

        onDemand.getIndexMembers({ symbol: '$SPX' }).then((data) => {
            data.results.forEach((member, index) => {
                console.log("getIndexMembers = " + index + ": " + member.symbol + JSON.stringify(member));
            });

        });

        onDemand.getFinancialHighlights({ symbols: 'AAPL' }).then((data) => {
            data.results.forEach((highlight, index) => {
                console.log("getFinancialHighlights = " + index + ": " + highlight.symbol + JSON.stringify(highlight));
            });
        });

        onDemand.getFinancialRatios({ symbols: 'AAPL' }).then((data) => {
            data.results.forEach((ratio, index) => {
                console.log("getFinancialRatios = " + index + ": " + ratio.symbol + JSON.stringify(ratio));
            });
        });

        onDemand.getIncomeStatements({ symbols: 'AAPL', frequency: 'Quarter' }).then((data) => {
            data.results.forEach((statement, index) => {
                console.log("getIncomeStatements = " + index + ": " + statement.symbol + JSON.stringify(statement));
            });
        });

        onDemand.getRatings({ symbols: 'AAPL,GOOG', fields: 'strongBuy,hold,strongSell' }).then((data) => {
            data.results.forEach((rating, index) => {
                console.log("getRatings = " + index + ": " + rating.symbol + JSON.stringify(rating));
            });

        });

        onDemand.getSignal({ symbols: 'AAPL,GOOG' }).then((data) => {
            data.results.forEach((signal, index) => {
                //console.log("getSignal = " + index + ": " + signal.symbol + JSON.stringify(signal));
            });
        });

        onDemand.getTechnicals({ symbols: 'AAPL,GOOG' }).then((data) => {
            data.results.forEach((quote, index) => {
                // console.log("getTechnicals = " + index + ": " + quote.symbol + " " + JSON.stringify(quote));
            });

        });

        onDemand.getCompetitors({ symbol: 'AAPL' }).then((data) => {
            data.results.forEach((comp, index) => {
                // console.log("getCompetitors = " + index + ": " + comp.symbol + " " + JSON.stringify(comp));
            });
        });

        onDemand.getProfile({ symbols: 'AAPL,GOOG' }).then((data) => {
            data.results.forEach((prof, index) => {
                // console.log("getProfile = " + index + ": " + prof.symbol + " " + JSON.stringify(prof));
            });
        });

        onDemand.getHighsLows({ exchanges: 'NYSE,NASDAQ', assetType: 'STK', type: 'high', period: '5d' }).then((data) => {
            data.results.forEach((result, index) => {
                // console.log("getHighsLows: 5-Day Highs, NYSE+NASDAQ = " + index + ": " + result.symbol + " " + JSON.stringify(result));
            });
        });

        onDemand.getMomentum({ exchanges: 'NYSE,NASDAQ' }).then((data) => {
            data.results.forEach((result, index) => {
                // console.log("getMomentum: US, NYSE, NASDAQ = " + index + ": " + result.exchange + " " + JSON.stringify(result));
            });
        });

        onDemand.getSECFilings({ symbols: 'AAPL,GOOG', filingType: '10q', maxRecords: '5' }).then((data) => {
            data.results.forEach((filing, index) => {
                // console.log("getSECFilings = " + index + ": " + filing.symbol + " " + JSON.stringify(filing));
            });
        });

        onDemand.getChart({ symbols: 'AAPL', type: 'AREA', height: '350' }).then((data) => {
            data.results.forEach((chart, index) => {
                // console.log("getChart = " + index + ": " + chart.symbol + " " + JSON.stringify(chart));
            });
        });

        onDemand.getNews({ sources: 'AP,IF', displayType: 'preview' }).then((data) => {
            data.results.forEach((feed, index) => {
                // console.log("getNews = " + index + ": " + feed.source + " " + JSON.stringify(feed));
            });
        });

        onDemand.getWeather({ weatherType: 'CC', zipCode: '60616' }).then((data) => {
            data.results.forEach((weather, index) => {
                // console.log("getWeather = " + index + ": " + weather.location + " " + JSON.stringify(weather));
            });
        });
    </script>
</head>

<body>

</body>

</html>